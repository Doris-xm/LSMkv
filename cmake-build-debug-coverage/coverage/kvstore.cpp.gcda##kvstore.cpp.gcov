        -:    0:Source:E:/CppProject/dataStruct2023/LSMkv/src/kvstore.cpp
        -:    0:Graph:E:\CppProject\dataStruct2023\LSMkv\cmake-build-debug-coverage\CMakeFiles\LSMkv_persist.dir\src\kvstore.cpp.gcno
        -:    0:Data:E:\CppProject\dataStruct2023\LSMkv\cmake-build-debug-coverage\CMakeFiles\LSMkv_persist.dir\src\kvstore.cpp.gcda
        -:    0:Runs:1
        -:    1:#include "../header/kvstore.h"
        -:    2:#include "../utils.h"
        -:    3:#include <string>
        -:    4:#include "iostream"
        -:    5:#include <sys/stat.h>
        -:    6:string DATA_PATH = "";
        -:    7:string FILE_PREFIX = "";
function _ZN7KVStoreC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE called 1 returned 100% blocks executed 61%
        1:    8:KVStore::KVStore(const std::string &dir ): KVStoreAPI(dir)
        1:    8-block  0
call    0 returned 1
        -:    9:{
        1:   10:    memtable = new SkipList();
call    0 returned 1
call    1 returned 1
branch  2 taken 1 (fallthrough)
branch  3 taken 0 (throw)
    $$$$$:   10-block  0
call    4 never executed
        1:   11:    disk_store = new DiskStore((string)CONFIG_DIR);
        1:   11-block  0
call    0 returned 1
call    1 returned 1
branch  2 taken 1 (fallthrough)
branch  3 taken 0 (throw)
        1:   11-block  1
call    4 returned 1
branch  5 taken 1 (fallthrough)
branch  6 taken 0 (throw)
        1:   11-block  2
call    7 returned 1
branch  8 taken 1 (fallthrough)
branch  9 taken 0 (throw)
        1:   11-block  3
call   10 returned 1
call   11 returned 1
    $$$$$:   11-block  4
call   12 never executed
    $$$$$:   11-block  5
call   13 never executed
    $$$$$:   11-block  6
    $$$$$:   11-block  7
call   14 never executed
        1:   12:    timestamp = 1;
        1:   13:    DATA_PATH = dir;
call    0 returned 1
        1:   14:    FILE_PREFIX = "/level-";
call    0 returned 1
        1:   15:    init();
call    0 returned 1
        1:   16:}
        -:   17:
function _ZN7KVStoreD2Ev called 0 returned 0% blocks executed 0%
    #####:   18:KVStore::~KVStore()
        -:   19:{
    #####:   20:    if(memtable ) {
    %%%%%:   20-block  0
branch  0 never executed
branch  1 never executed
    #####:   21:        dump();
    %%%%%:   21-block  0
call    0 never executed
        -:   22:    }
    #####:   23:    delete memtable;
    %%%%%:   23-block  0
branch  0 never executed
branch  1 never executed
    %%%%%:   23-block  1
call    2 never executed
call    3 never executed
    #####:   24:    delete disk_store;
    %%%%%:   24-block  0
branch  0 never executed
branch  1 never executed
    %%%%%:   24-block  1
call    2 never executed
call    3 never executed
    #####:   25:}
        -:   26:
        -:   27:/**
        -:   28: * Insert/Update the key-value pair.
        -:   29: * No return values for simplicity.
        -:   30: */
function _ZN7KVStore3putEyRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE called 5933 returned 100% blocks executed 64%
     5933:   31:void KVStore::put(uint64_t key, const std::string &s)
        -:   32:{
     5933:   33:    if(memtable == nullptr)
     5933:   33-block  0
branch  0 taken 0 (fallthrough)
branch  1 taken 5933
    #####:   34:        memtable = new SkipList();
    %%%%%:   34-block  0
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
    %%%%%:   34-block  1
    $$$$$:   34-block  2
call    4 never executed
     5933:   35:    if(!memtable->insert(key, s)) {
     5933:   35-block  0
call    0 returned 5933
branch  1 taken 3 (fallthrough)
branch  2 taken 5930
        3:   36:        dump();
        3:   36-block  0
call    0 returned 2
        2:   37:        memtable->insert(key, s);
call    0 returned 2
        -:   38:    }
        -:   39:
     5932:   40:}
     5932:   40-block  0
        -:   41:/**
        -:   42: * Returns the (string) value of the given key.
        -:   43: * An empty string indicates not found.
        -:   44: */
function _ZN7KVStore3getB5cxx11Ey called 10231 returned 100% blocks executed 54%
    10231:   45:std::string KVStore::get(uint64_t key)
        -:   46:{
    10231:   47:    string res="";
    10231:   47-block  0
call    0 returned 10231
call    1 returned 10231
branch  2 taken 10231 (fallthrough)
branch  3 taken 0 (throw)
    $$$$$:   47-block  1
    10231:   48:    if( !memtable) // 这种情况只可能是其他函数delete后忘记new
branch  0 taken 0 (fallthrough)
branch  1 taken 10231
    #####:   49:        memtable = new SkipList();
    %%%%%:   49-block  0
call    0 never executed
branch  1 never executed
branch  2 never executed
    %%%%%:   49-block  1
call    3 never executed
branch  4 never executed
branch  5 never executed
    %%%%%:   49-block  2
    $$$$$:   49-block  3
call    6 never executed
        -:   50:    else
    10231:   51:        res = memtable->search(key);
    10231:   51-block  0
call    0 returned 10231
branch  1 taken 10231 (fallthrough)
branch  2 taken 0 (throw)
    10231:   51-block  1
call    3 returned 10231
call    4 returned 10231
        -:   52:    // 被删除
    10231:   53:    if(res == (string)DELETE_VAL)
    10231:   53-block  0
call    0 returned 10231
call    1 returned 10231
branch  2 taken 10231 (fallthrough)
branch  3 taken 0 (throw)
    10231:   53-block  1
call    4 returned 10231
call    5 returned 10231
call    6 returned 10231
branch  7 taken 1325 (fallthrough)
branch  8 taken 8906
    $$$$$:   53-block  2
call    9 never executed
    $$$$$:   53-block  3
     1325:   54:        return "";
     1325:   54-block  0
call    0 returned 1325
call    1 returned 1325
branch  2 taken 1325 (fallthrough)
branch  3 taken 0 (throw)
     1325:   54-block  1
call    4 returned 1325
    $$$$$:   54-block  2
call    5 never executed
    $$$$$:   54-block  3
        -:   55:
        -:   56:    //不在memtable中
     8906:   57:    if(res.empty()) {
     8906:   57-block  0
call    0 returned 8906
branch  1 taken 5637 (fallthrough)
branch  2 taken 3269
    11274:   58:        string directory = string(DATA_PATH )+string(FILE_PREFIX);
     5637:   58-block  0
call    0 returned 5637
branch  1 taken 5637 (fallthrough)
branch  2 taken 0 (throw)
     5637:   58-block  1
call    3 returned 5637
branch  4 taken 5637 (fallthrough)
branch  5 taken 0 (throw)
     5637:   58-block  2
call    6 returned 5637
branch  7 taken 5637 (fallthrough)
branch  8 taken 0 (throw)
call    9 returned 5637
    $$$$$:   58-block  3
    $$$$$:   58-block  4
     5637:   59:        res = disk_store->get(key,directory);
call    0 returned 5637
branch  1 taken 5637 (fallthrough)
branch  2 taken 0 (throw)
     5637:   59-block  0
call    3 returned 5637
call    4 returned 5637
     5637:   60:    }
call    0 returned 5637
    $$$$$:   60-block  0
call    1 never executed
     8906:   61:    if(res == (string)DELETE_VAL)
     8906:   61-block  0
call    0 returned 8906
call    1 returned 8906
branch  2 taken 8906 (fallthrough)
branch  3 taken 0 (throw)
     8906:   61-block  1
call    4 returned 8906
call    5 returned 8906
call    6 returned 8906
branch  7 taken 0 (fallthrough)
branch  8 taken 8906
    $$$$$:   61-block  2
call    9 never executed
    $$$$$:   61-block  3
    #####:   62:        return "";
    %%%%%:   62-block  0
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
    %%%%%:   62-block  1
call    4 never executed
    $$$$$:   62-block  2
call    5 never executed
    $$$$$:   62-block  3
     8906:   63:    return res;
     8906:   63-block  0
call    0 returned 8906
    10231:   64:}
    10231:   64-block  0
call    0 returned 10231
    $$$$$:   64-block  1
call    1 never executed
        -:   65:/**
        -:   66: * Delete the given key-value pair if it exists.
        -:   67: * Returns false iff the key is not found.
        -:   68: */
function _ZN7KVStore3delEy called 1536 returned 100% blocks executed 64%
     1536:   69:bool KVStore::del(uint64_t key)
        -:   70:{
        -:   71:    // 先去memtable删除
     1536:   72:    string res = memtable->search(key);
     1536:   72-block  0
call    0 returned 1536
branch  1 taken 1536 (fallthrough)
branch  2 taken 0 (throw)
     1536:   73:    if (res == (string)DELETE_VAL)// 重复删除
     1536:   73-block  0
call    0 returned 1536
call    1 returned 1536
branch  2 taken 1536 (fallthrough)
branch  3 taken 0 (throw)
     1536:   73-block  1
call    4 returned 1536
call    5 returned 1536
call    6 returned 1536
branch  7 taken 0 (fallthrough)
branch  8 taken 1536
    $$$$$:   73-block  2
call    9 never executed
    $$$$$:   73-block  3
    #####:   74:        return false;
    %%%%%:   74-block  0
     1536:   75:    if ( res.empty()) {
     1536:   75-block  0
call    0 returned 1536
branch  1 taken 1438 (fallthrough)
branch  2 taken 98
        -:   76:        // 说明memtable中没有
     1438:   77:        if(disk_store->get_level_num() == 0) // 没有磁盘文件
     1438:   77-block  0
call    0 returned 1438
branch  1 taken 0 (fallthrough)
branch  2 taken 1438
    #####:   78:            return false;
    %%%%%:   78-block  0
        -:   79:        // 去磁盘中找
     1438:   80:        if(get(key).empty())
     1438:   80-block  0
call    0 returned 1438
branch  1 taken 1438 (fallthrough)
branch  2 taken 0 (throw)
     1438:   80-block  1
call    3 returned 1438
call    4 returned 1438
branch  5 taken 0 (fallthrough)
branch  6 taken 1438
    #####:   81:            return false;
    %%%%%:   81-block  0
        -:   82:    }
     1536:   83:    put(key, (string)DELETE_VAL);
     1536:   83-block  0
call    0 returned 1536
call    1 returned 1536
branch  2 taken 1536 (fallthrough)
branch  3 taken 0 (throw)
     1536:   83-block  1
call    4 returned 1536
branch  5 taken 1536 (fallthrough)
branch  6 taken 0 (throw)
     1536:   83-block  2
call    7 returned 1536
call    8 returned 1536
    $$$$$:   83-block  3
call    9 never executed
    $$$$$:   83-block  4
    $$$$$:   83-block  5
call   10 never executed
    $$$$$:   83-block  6
     1536:   84:    return true;
     1536:   85:}
     1536:   85-block  0
call    0 returned 1536
    $$$$$:   85-block  1
call    1 never executed
        -:   86:
        -:   87:/**
        -:   88: * This resets the kvstore. All key-value pairs should be removed,
        -:   89: * including memtable and all sstables files.
        -:   90: */
function _ZN7KVStore5resetEv called 1 returned 100% blocks executed 60%
        1:   91:void KVStore::reset()
        -:   92:{
        1:   93:    vector<string> directories;
        1:   93-block  0
call    0 returned 1
        1:   94:    utils::scanDir(DATA_PATH, directories);
call    0 returned 1
branch  1 taken 1 (fallthrough)
branch  2 taken 0 (throw)
        1:   94-block  0
call    3 returned 1
branch  4 taken 1 (fallthrough)
branch  5 taken 0 (throw)
        1:   94-block  1
call    6 returned 1
    $$$$$:   94-block  2
call    7 never executed
    $$$$$:   94-block  3
        3:   95:    for (auto &dir : directories) {
call    0 returned 1
call    1 returned 1
        2:   95-block  0
call    2 returned 2
call    3 returned 2
        3:   95-block  1
call    4 returned 3
branch  5 taken 2
branch  6 taken 1 (fallthrough)
        2:   96:        string dir_path = DATA_PATH +'/'+ dir;
call    0 returned 2
branch  1 taken 2 (fallthrough)
branch  2 taken 0 (throw)
        2:   96-block  0
call    3 returned 2
branch  4 taken 2 (fallthrough)
branch  5 taken 0 (throw)
    $$$$$:   96-block  1
        2:   97:        vector<string> files;
call    0 returned 2
        2:   98:        utils::scanDir(dir_path, files);
call    0 returned 2
branch  1 taken 2 (fallthrough)
branch  2 taken 0 (throw)
        2:   98-block  0
call    3 returned 2
branch  4 taken 2 (fallthrough)
branch  5 taken 0 (throw)
        2:   98-block  1
call    6 returned 2
    $$$$$:   98-block  2
call    7 never executed
    $$$$$:   98-block  3
        5:   99:        for (auto &file : files) {
call    0 returned 2
call    1 returned 2
        3:   99-block  0
call    2 returned 3
call    3 returned 3
        5:   99-block  1
call    4 returned 5
branch  5 taken 3
branch  6 taken 2 (fallthrough)
        3:  100:            string file_path = dir_path + "/" + file;
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        3:  100-block  0
call    3 returned 3
branch  4 taken 3 (fallthrough)
branch  5 taken 0 (throw)
    $$$$$:  100-block  1
        3:  101:            utils::rmfile(file_path.c_str());
call    0 returned 3
call    1 returned 3
branch  2 taken 3 (fallthrough)
branch  3 taken 0 (throw)
        3:  102:        }
        3:  102-block  0
call    0 returned 3
    $$$$$:  102-block  1
call    1 never executed
        2:  103:        utils::rmdir(dir_path.c_str());
        2:  103-block  0
call    0 returned 2
call    1 returned 2
branch  2 taken 2 (fallthrough)
branch  3 taken 0 (throw)
        2:  104:    }
        2:  104-block  0
call    0 returned 2
call    1 returned 2
    $$$$$:  104-block  1
call    2 never executed
    $$$$$:  104-block  2
call    3 never executed
        -:  105:
        1:  106:    delete memtable;
        1:  106-block  0
branch  0 taken 1 (fallthrough)
branch  1 taken 0
        1:  106-block  1
call    2 returned 1
call    3 returned 1
        1:  107:    delete disk_store;
        1:  107-block  0
branch  0 taken 1 (fallthrough)
branch  1 taken 0
        1:  107-block  1
call    2 returned 1
call    3 returned 1
        1:  108:    memtable = new SkipList();
        1:  108-block  0
call    0 returned 1
branch  1 taken 1 (fallthrough)
branch  2 taken 0 (throw)
        1:  108-block  1
call    3 returned 1
branch  4 taken 1 (fallthrough)
branch  5 taken 0 (throw)
    $$$$$:  108-block  2
call    6 never executed
        1:  109:    disk_store = new DiskStore((string)CONFIG_DIR);
        1:  109-block  0
call    0 returned 1
call    1 returned 1
branch  2 taken 1 (fallthrough)
branch  3 taken 0 (throw)
        1:  109-block  1
call    4 returned 1
branch  5 taken 1 (fallthrough)
branch  6 taken 0 (throw)
        1:  109-block  2
call    7 returned 1
branch  8 taken 1 (fallthrough)
branch  9 taken 0 (throw)
        1:  109-block  3
call   10 returned 1
call   11 returned 1
    $$$$$:  109-block  4
call   12 never executed
    $$$$$:  109-block  5
call   13 never executed
    $$$$$:  109-block  6
    $$$$$:  109-block  7
call   14 never executed
    $$$$$:  109-block  8
        1:  110:    timestamp = 1;
        1:  111:}
call    0 returned 1
    $$$$$:  111-block  0
call    1 never executed
        -:  112:
        -:  113:/**
        -:  114: * Return a list including all the key-value pair between key1 and key2.
        -:  115: * keys in the list should be in an ascending order.
        -:  116: * An empty string indicates not found.
        -:  117: */
function _ZN7KVStore4scanEyyRNSt7__cxx114listISt4pairIyNS0_12basic_stringIcSt11char_traitsIcESaIcEEEESaIS8_EEE called 0 returned 0% blocks executed 0%
    #####:  118:void KVStore::scan(uint64_t key1, uint64_t key2, std::list<std::pair<uint64_t, std::string> > &list)
        -:  119:{
        -:  120:    // 先去memtable中找
    #####:  121:    memtable->scan(key1, key2, list);
    %%%%%:  121-block  0
call    0 never executed
        -:  122:    //TODO: 去磁盘中找
    #####:  123:}
        -:  124:
        -:  125:
        -:  126:/*
        -:  127: * @brief:扫描目录，将文件加载到内存中
        -:  128: * */
function _ZN7KVStore4initEv called 1 returned 100% blocks executed 40%
        1:  129:void KVStore::init() {
        1:  130:    vector<string> directories;
        1:  130-block  0
call    0 returned 1
        1:  131:    utils::scanDir(DATA_PATH, directories);
call    0 returned 1
branch  1 taken 1 (fallthrough)
branch  2 taken 0 (throw)
        1:  131-block  0
call    3 returned 1
branch  4 taken 1 (fallthrough)
branch  5 taken 0 (throw)
        1:  131-block  1
call    6 returned 1
    $$$$$:  131-block  2
call    7 never executed
    $$$$$:  131-block  3
        3:  132:    for (auto &dir : directories) {
call    0 returned 1
call    1 returned 1
        2:  132-block  0
call    2 returned 2
call    3 returned 2
        3:  132-block  1
call    4 returned 3
branch  5 taken 2
branch  6 taken 1 (fallthrough)
        2:  133:        string dir_path = DATA_PATH + dir;
call    0 returned 2
branch  1 taken 2 (fallthrough)
branch  2 taken 0 (throw)
        2:  134:        vector<string> files;
        2:  134-block  0
call    0 returned 2
        2:  135:        utils::scanDir(dir_path, files);
call    0 returned 2
branch  1 taken 2 (fallthrough)
branch  2 taken 0 (throw)
        2:  135-block  0
call    3 returned 2
branch  4 taken 2 (fallthrough)
branch  5 taken 0 (throw)
        2:  135-block  1
call    6 returned 2
    $$$$$:  135-block  2
call    7 never executed
    $$$$$:  135-block  3
       2*:  136:        for (auto &file : files) {
call    0 returned 2
call    1 returned 2
    %%%%%:  136-block  0
call    2 never executed
call    3 never executed
        2:  136-block  1
call    4 returned 2
branch  5 taken 0
branch  6 taken 2 (fallthrough)
    #####:  137:            string file_path = dir_path + "/" + file;
call    0 never executed
branch  1 never executed
branch  2 never executed
    %%%%%:  137-block  0
call    3 never executed
branch  4 never executed
branch  5 never executed
    $$$$$:  137-block  1
        -:  138:            uint32_t level;
    #####:  139:            sscanf(dir.c_str(), "level-%u", &level);
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
        -:  140:            uint64_t time_stamp;
        -:  141:            uint64_t serial;
    #####:  142:            sscanf(file.c_str(), "%lu-%lu.sst",&time_stamp, &serial);
    %%%%%:  142-block  0
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
    #####:  143:            SSTable* ssTable = new SSTable(file_path, time_stamp, serial);
    %%%%%:  143-block  0
call    0 never executed
branch  1 never executed
branch  2 never executed
    %%%%%:  143-block  1
call    3 never executed
branch  4 never executed
branch  5 never executed
    $$$$$:  143-block  2
call    6 never executed
    #####:  144:            bool flag = false;
    #####:  145:            disk_store->add_sstable(ssTable, level,flag);
    %%%%%:  145-block  0
call    0 never executed
branch  1 never executed
branch  2 never executed
        -:  146:            //TODO:未检查合并（默认文件无损坏）
    #####:  147:        }
    %%%%%:  147-block  0
call    0 never executed
    $$$$$:  147-block  1
call    1 never executed
        2:  148:    }
        2:  148-block  0
call    0 returned 2
call    1 returned 2
    $$$$$:  148-block  1
call    2 never executed
    $$$$$:  148-block  2
call    3 never executed
        1:  149:}
        1:  149-block  0
call    0 returned 1
    $$$$$:  149-block  1
call    1 never executed
        -:  150:
        -:  151:/*
        -:  152: * file_name: timestamp-serial.sst
        -:  153: * */
function _ZN7KVStore4dumpEv called 3 returned 67% blocks executed 56%
        3:  154:void KVStore::dump() {
        3:  155:    string directory = DATA_PATH + FILE_PREFIX + "0";
        3:  155-block  0
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        3:  155-block  1
call    3 returned 3
branch  4 taken 3 (fallthrough)
branch  5 taken 0 (throw)
    $$$$$:  155-block  2
        3:  156:    if (!utils::dirExists(directory)) {
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        3:  156-block  0
call    3 returned 3
branch  4 taken 3 (fallthrough)
branch  5 taken 0 (throw)
        3:  156-block  1
call    6 returned 3
branch  7 taken 1 (fallthrough)
branch  8 taken 2
    $$$$$:  156-block  2
call    9 never executed
    $$$$$:  156-block  3
        1:  157:        utils::mkdir(directory.c_str());
        1:  157-block  0
call    0 returned 1
call    1 returned 1
branch  2 taken 1 (fallthrough)
branch  3 taken 0 (throw)
        1:  158:        if( (disk_store->get_level_num() == 0)) {
        1:  158-block  0
call    0 returned 1
branch  1 taken 1 (fallthrough)
branch  2 taken 0
        -:  159:            // 层未创建过,level0 始终是tiering
        1:  160:            disk_store->add_level(DiskLevel::TIERING);
        1:  160-block  0
call    0 returned 1
branch  1 taken 1 (fallthrough)
branch  2 taken 0 (throw)
        -:  161:        }
        -:  162:    }
        3:  163:    SSTable *ss_table = new SSTable(memtable, timestamp);
        3:  163-block  0
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        3:  163-block  1
call    3 returned 3
branch  4 taken 3 (fallthrough)
branch  5 taken 0 (throw)
    $$$$$:  163-block  2
call    6 never executed
        3:  164:    bool compaction_flag = false;
        3:  165:    uint64_t serial =  disk_store->add_sstable(ss_table, 0,compaction_flag);
        3:  165-block  0
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        -:  166:
        -:  167:    // 保存成文件
        6:  168:    string file = directory + '/' +  to_string(timestamp) + '-' + to_string(serial) + ".sst";
        3:  168-block  0
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        3:  168-block  1
call    3 returned 3
branch  4 taken 3 (fallthrough)
branch  5 taken 0 (throw)
        3:  168-block  2
call    6 returned 3
branch  7 taken 3 (fallthrough)
branch  8 taken 0 (throw)
        3:  168-block  3
call    9 returned 3
branch 10 taken 3 (fallthrough)
branch 11 taken 0 (throw)
        3:  168-block  4
call   12 returned 3
branch 13 taken 3 (fallthrough)
branch 14 taken 0 (throw)
        3:  168-block  5
call   15 returned 3
branch 16 taken 3 (fallthrough)
branch 17 taken 0 (throw)
        3:  168-block  6
call   18 returned 3
branch 19 taken 3 (fallthrough)
branch 20 taken 0 (throw)
call   21 returned 3
call   22 returned 3
call   23 returned 3
call   24 returned 3
call   25 returned 3
    $$$$$:  168-block  7
    $$$$$:  168-block  8
    $$$$$:  168-block  9
    $$$$$:  168-block 10
    $$$$$:  168-block 11
    $$$$$:  168-block 12
        3:  169:    ss_table->save_file(file);
call    0 returned 3
branch  1 taken 3 (fallthrough)
branch  2 taken 0 (throw)
        3:  170:    if(compaction_flag) {
        3:  170-block  0
branch  0 taken 1 (fallthrough)
branch  1 taken 2
        1:  171:        compaction(1);
        1:  171-block  0
call    0 returned 0
branch  1 taken 0 (fallthrough)
branch  2 taken 0 (throw)
        -:  172:    }
        2:  173:    timestamp++;
        -:  174:
        -:  175:    // 清空memtable
        2:  176:    delete memtable;
        2:  176-block  0
branch  0 taken 2 (fallthrough)
branch  1 taken 0
        2:  176-block  1
call    2 returned 2
call    3 returned 2
        2:  177:    memtable = new SkipList();
        2:  177-block  0
call    0 returned 2
branch  1 taken 2 (fallthrough)
branch  2 taken 0 (throw)
        2:  177-block  1
call    3 returned 2
branch  4 taken 2 (fallthrough)
branch  5 taken 0 (throw)
    $$$$$:  177-block  2
call    6 never executed
        2:  178:}
        2:  178-block  0
call    0 returned 2
call    1 returned 2
    $$$$$:  178-block  1
call    2 never executed
    $$$$$:  178-block  2
call    3 never executed
        -:  179:
        -:  180:/*
        -:  181: *
        -:  182: * @param dump_to_level: dump的目标层
        -:  183: * */
function _ZN7KVStore10compactionEj called 1 returned 0% blocks executed 48%
        1:  184:void KVStore::compaction(uint32_t dump_to_level) {
       1*:  185:    if(dump_to_level <= 0 || dump_to_level > disk_store->get_level_num()) { // 上层函数错误传参情况
        1:  185-block  0
branch  0 taken 1 (fallthrough)
branch  1 taken 0
        1:  185-block  1
call    2 returned 1
branch  3 taken 0 (fallthrough)
branch  4 taken 1
    %%%%%:  185-block  2
        1:  185-block  3
        1:  185-block  4
branch  5 taken 0 (fallthrough)
branch  6 taken 1
    #####:  186:        return;
    %%%%%:  186-block  0
        -:  187:    }
        -:  188:
        -:  189:    // 创建目录前缀，让disk解决compaction
        2:  190:    string directory = string(DATA_PATH )+string(FILE_PREFIX);
        1:  190-block  0
call    0 returned 1
branch  1 taken 1 (fallthrough)
branch  2 taken 0 (throw)
        1:  190-block  1
call    3 returned 1
branch  4 taken 1 (fallthrough)
branch  5 taken 0 (throw)
        1:  190-block  2
call    6 returned 1
branch  7 taken 1 (fallthrough)
branch  8 taken 0 (throw)
call    9 returned 1
    $$$$$:  190-block  3
    $$$$$:  190-block  4
        1:  191:    disk_store->compaction(dump_to_level, directory);
call    0 returned 0
branch  1 taken 0 (fallthrough)
branch  2 taken 0 (throw)
        -:  192:
    #####:  193:}
    %%%%%:  193-block  0
call    0 never executed
    $$$$$:  193-block  1
call    1 never executed
